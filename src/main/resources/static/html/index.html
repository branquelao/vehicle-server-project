<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Principal</title>
    <link rel="icon" type="image/png" href="/img/favicon-full.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <link href ='https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap')>
</head>
<body>

<div class="container mt-4">
    <div class="menuP d-flex justify-content-around align-items-center">
        <a href="index.html">Home</a>
        <a href="carros.html">Carros</a>
        <a href="motos.html">Motos</a>
        <a href="anunciar.html">Anunciar</a>
    </div>
</div>

<a href="perfil.html" class="btn btn-black rounded-circle perfil-btn">
    <i class="bi bi-person-fill"></i>
</a>

<!-- Conte√∫do principal -->
<div class="container mt-5">

    <!-- üîπ Carrossel de Carros -->
    <h2 class="text-center mt-5 mb-3">Carros em destaque</h2>
    <div id="carouselCarros" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselCarros" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#carouselCarros" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#carouselCarros" data-bs-slide-to="2"></button>
        </div>

        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../uploads/carro1.jpg" class="d-block w-100" alt="Carro 1">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="../uploads/carro1.jpg" class="d-block w-100" alt="Carro 2">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="../uploads/carro1.jpg" class="d-block w-100" alt="Carro 3">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselCarros" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselCarros" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Pr√≥ximo</span>
        </button>

    </div>

    <!-- üîπ Carrossel de Motos -->
    <h2 class="text-center mt-5 mb-3">Motos em destaque</h2>
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"></button>
        </div>

        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../uploads/moto1.jpg" class="d-block w-100" alt="Moto 2">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="../uploads/moto1.jpg" class="d-block w-100" alt="Moto 1">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img src="../uploads/moto1.jpg" class="d-block w-100" alt="Moto 3">
                <div class="carousel-caption d-none d-md-block">
                    <div class="Pcarrocel">
                        <h5>carregando nome...</h5>
                        <p>carregando detalhes...</p>
                    </div>
                </div>
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Pr√≥ximo</span>
        </button>

    </div>

</div>

<footer class="footer mt-5 py-4">
    <div class="container text-center">
        <h5 class="mb-3">Burnout Zone! üöóüèçÔ∏è</h5>
        <p class="mb-2">O melhor site para an√∫ncios dos melhores ve√≠culos!</p>

        <div class="social-icons mb-3">
            <a href="#"><i class="bi bi-facebook"></i></a>
            <a href="#"><i class="bi bi-instagram"></i></a>
            <a href="#"><i class="bi bi-twitter-x"></i></a>
            <a href="#"><i class="bi bi-youtube"></i></a>
        </div>

        <p class="mb-0">&copy; 2025 - Burnout Zone!‚Ñ¢ | Feito por grupo Na M√£o de Deus</p>
    </div>
</footer>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
      carregarDestaques("carro");
      carregarDestaques("moto");
    });

    function carregarDestaques(tipo) {
      const endpoint = tipo === "carro"
        ? "http://localhost:8080/veiculos/carro/recentes"
        : "http://localhost:8080/veiculos/moto/recentes";

      fetch(endpoint)
        .then(res => {
          if (!res.ok) throw new Error(`Erro ao buscar ${tipo}s (${res.status})`);
          return res.json();
        })
        .then(lista => {
          if (!Array.isArray(lista) || lista.length === 0) {
            console.warn(`Nenhum ${tipo} encontrado`);
            return;
          }

          const carouselInner = document.querySelector(
            tipo === "carro" ? "#carouselCarros .carousel-inner" : "#carouselExampleCaptions .carousel-inner"
          );
          const carouselIndicators = document.querySelector(
            tipo === "carro" ? "#carouselCarros .carousel-indicators" : "#carouselExampleCaptions .carousel-indicators"
          );

          // limpa antes de construir
          carouselInner.innerHTML = "";
          carouselIndicators.innerHTML = "";

          lista.forEach((item, index) => {
            const ativo = index === 0 ? "active" : "";

            // pega os campos corretos dependendo do tipo
            const nome = tipo === "carro" ? item.carroNome : item.motoNome;
            const ano  = tipo === "carro" ? item.carroAno  : item.motoAno;
            const valor= tipo === "carro" ? item.carroValor: item.motoValor;
            const img  = tipo === "carro" ? item.carroImagem: item.motoImagem;

            // fallback de imagem (substitua pelos nomes corretos se quiser)
            const imagemSrc = img && img.trim() !== "" ? `../uploads/${img}` : `../uploads/${tipo}${index+1}.jpg`;

            // formata valor em pt-BR (garante Number)
            let valorFormatado = "R$ 0,00";
            if (valor !== undefined && valor !== null && !isNaN(Number(valor))) {
              valorFormatado = `R$ ${Number(valor).toLocaleString("pt-BR", { minimumFractionDigits: 2 })}`;
            }

            const slide = document.createElement("div");
            slide.className = `carousel-item ${ativo}`;
            slide.innerHTML = `
              <img src="${imagemSrc}" class="d-block w-100" alt="${nome || tipo}">
              <div class="carousel-caption d-none d-md-block">
                <div class="Pcarrocel">
                  <h5>${nome ?? "Sem nome"}</h5>
                  <p>${ano ?? "Ano desconhecido"} ‚Äî ${valorFormatado}</p>
                </div>
              </div>
            `;

            const indicador = document.createElement("button");
            indicador.type = "button";
            indicador.setAttribute("data-bs-target", `#${tipo === "carro" ? "carouselCarros" : "carouselExampleCaptions"}`);
            indicador.setAttribute("data-bs-slide-to", String(index));
            if (ativo) indicador.classList.add("active");

            carouselInner.appendChild(slide);
            carouselIndicators.appendChild(indicador);
          });
        })
        .catch(err => {
          console.error(err);
          // mensagem n√£o intrusiva; ajuste conforme preferir
          // alert(`N√£o foi poss√≠vel carregar os ${tipo}s em destaque.`);
        });
    }
</script>

</body>
</html>
